# notes on re-running software

# TODO: CLOSE FIGURES SO ONLY PLOT REAL-TIME APERTURE STAMP
- added plt.close() statement to all other figures

# TODO: ROBUST PSF FITTING ROUTINE
- added parameter bounds to L-BFGS-B method

# TODO: HOUSEKEEPING LOG NOT UPDATING
- https://stackoverflow.com/questions/15892946/python-logging-module-is-not-writing-anything-to-file
- FIXED

# TODO: JIT COMPILATION OF "sky_stamps"
- error was with bb_pos and bb_rs not being numpy arrays
- have fixed background boxes to be of same size for more efficient numba computation

# TODO: CHECK ABOVE COMPUTATION OF "FIXED" "sky_stamps" IS CORRECT

# TODO: WEIGHTED APERTURE FLUX SUMMATION

# TODO: SPEED UP KDE EVALUATION BY UPSAMPLING EVALUATION AT LOWER RESOLUTION
- implemented upscaling with scipy.ndimage.zoom on a coarser KDE evaluated grid (<1 second)

# TODO: EXTEND CHANGE DETECTION TO THE 3 BRIGHTEST ISOLATED RATHER THAN JUST ONE
- now use the 2 brightest isolated sources
# TODO: DON'T SAVE EMPTY RESULTS FILES E.G. IF THE CODE FAILS....
- if the saved photometry files is equal or less than the burn-in setting, the directory is deleted
# TODO: SEPARATE RESULTS DIRECTORY
- results now saved to separate fits, images and photometry directories

# TODO: DON'T RUN IF NO SOURCES DETECTED (COULD GET STUCK RECORDING ~0 FLUX WITH NO CHANGE)
- if no peaks are returned, the run is aborted and the results file deleted

# TODO: LIMIT TIME SPENT FINDING BACKGROUND REGIONS (COULD GET STUCK TRYING TO FIND A REGION WHICH SATISIFES THE CONDITION)
- search is aborted after 5 seconds, and if no boxes are found, the run is aborted and the results directory deleted

# TODO: FLAT AND DARK SCRIPTS (MAKE A VERSION AGNOSTIC TO WHETHER THERE'S AN AVAILABLE DARK/FLAT?)
- done. required some tweaking of the real-time plotting to adapt to displays in the presence of image bias

# TODO: MODAL SKY BACKGROUND ESTIMATE?
- implemented a numpy method to do this, as the median pixel value was overestimating the background in crowded fields
- this requires adjusting the source detection threshold, as for a given threshold, more will typically be detected after a modal subtraction

# TODO: COMPLETE AUTOMATION... I.E. IF NOTHING'S GOING ON IN THE DAY, IT DOESN'T DO ANYTHING, EXCEPT
POSSIBLY ANALYSE THE PREVIOUS NIGHT'S WORTH OF DATA
# TODO: OCCULTATION DETECTION; END OF ONE BATCH AND START OF THE OTHER...


############################################################
- TESTS (11/01/2024)
- Running without cablibration frames
- Dark fields when no sources detected
- Same tests as last time (making sure folder structure saved correctly)

- reference exposure quality...

- airmass.org (moon positioning) (rich as cluster as possible)....

# TODO: OTHER "NEW_SCENE" CRITERION
- How does it behave when the telescope "slews"? Difficult to test on my end. Maybe something simple like
standard deviations from measured background level? / set batch size to be small?? / take another ref exposure just before
the run starts and compare brightness and position changes????
	- Implemented relative brightness comparison between the expected sky background of a source aperture,
	and the measured flux of the two tracked sources

# TODO: better file management after Ctrl-C - separate "run" directories to ensure no overwrites
- Each run generates a unique directory, ordered like "RUN_0", "RUN_1" etc. within each "SCENE_0", "SCENE_1" etc. directories
are generated

# TODO: BOUNDS ON PSF MODEL PARAMETERS E.G. FLUX
A, sigma_x, sigma_y, b, xc, yc = params
old bounds: bounds = [(1e-3, 1e3), (1, 30), (1, 30), (-1e3, 1e3), (1, nx), (1, ny)]
new bounds = [(0, 1e9), (1, 30), (1, 30), (-1e9, 1e9), (1, nx), (1, ny)]

# TODO: HEURISTIC ASSESSMENT OF PSF MODEL
- if the 2d gaussian x/y axis length is >= 2 of the y/x length, abort run, and reacquire a new reference image

#########################################################
- TESTS (30/01/2024)

- check new frame rate associated with the additional ops overhead
 - how does this depend on the batch size?
- trial appropriate scene change thresholds for both criteria
 - n.b. the sky flux / source flux criterion sensitive to aperture size
- check behaviour of new reference frame quality check(s)

Main issue flagged from previous test was that of the quality of the reference exposure, and the associated PSF model
	- What else can we do to ensure, as best as we can, that these procedures generalise well?

##########################################################
###### package updates and other etc. ####################


# 1st run
(base) C:\Users\James\offline_test\up2datefaust_inlab>python run.py
Cross-correlating reference image with the PSF model... this could take a while.

      click  -->  release
Traceback (most recent call last):
  File "C:\Users\James\offline_test\up2datefaust_inlab\run.py", line 190, in <module>
    bb_pos, bb_rs = imageproc.background_boxes(ref)
  File "C:\Users\James\offline_test\up2datefaust_inlab\imageproc.py", line 242, in background_boxes
    toggle_selector.RS = RectangleSelector(current_ax, line_select_callback,
TypeError: __init__() got an unexpected keyword argument 'drawtype'

>>> import matplotlib
>>> matplotlib.__version__
'3.7.1'


## SOLUTION ##

commented out drawtype, not needed in new matplotlib version

#drawtype='box'


######### OTHER NOTES ####################

If one fails, try the other:
img_coll = np.array(MultiImage(file_name))[0] / img_coll = np.array(MultiImage(file_name))


# TODO: ISSUE WITH PRANGE IN SKY_STAMPS FUNCTION

>>> import numba
>>> numba.__version__
'0.56.4'

(base) C:\Users\James\kinetix_data_system\lab_tests\data_system_lab>conda update numba
Collecting package metadata (current_repodata.json): done
Solving environment: /
The environment is inconsistent, please check the package plan carefully
The following packages are causing the inconsistency:

  - defaults/win-64::anaconda==custom=py39_1
  - defaults/win-64::gevent==21.8.0=py39h2bbff1b_1
  - defaults/win-64::holoviews==1.15.4=py39haa95532_0
  - defaults/win-64::hvplot==0.8.2=py39haa95532_0
  - defaults/win-64::jupyter==1.0.0=py39haa95532_8
  - defaults/win-64::notebook==6.5.4=py39haa95532_0
  - defaults/win-64::qt==5.9.7=vc14h73c81de_0
  - defaults/win-64::_anaconda_depends==2023.03=py39_0
\
Warning: 2 possible package resolutions (only showing differing packages):
  - defaults/noarch::conda-content-trust-0.1.1-pyhd3eb1b0_0, defaults/win-64::cryptography-41.0.2-py39h31511bf_0
  - defaults/win-64::conda-content-trust-0.1.3-py39haa95532_0, defaults/win-64::cryptography-39.0.1-py39h21b164fdone


==> WARNING: A newer version of conda exists. <==
  current version: 4.10.3
  latest version: 23.7.2

Please update conda by running

    $ conda update -n base -c defaults conda



## Package Plan ##

  environment location: C:\Users\James\anaconda3

  added / updated specs:
    - numba


The following packages will be downloaded:

    package                    |            build
    ---------------------------|-----------------
    abseil-cpp-20211102.0      |       hd77b12b_0         1.7 MB
    aiohttp-3.8.3              |   py39h2bbff1b_0         415 KB
    aiosignal-1.2.0            |     pyhd3eb1b0_0          12 KB
    anaconda-client-1.12.0     |   py39haa95532_0         166 KB
    arrow-cpp-11.0.0           |   py39h3577439_0         7.2 MB
    async-timeout-4.0.2        |   py39haa95532_0          12 KB
    aws-c-common-0.4.57        |       ha925a31_1         147 KB
    aws-c-event-stream-0.1.6   |       hd77b12b_5          26 KB
    aws-checksums-0.1.9        |       ha925a31_0          50 KB
    aws-sdk-cpp-1.8.185        |       hd77b12b_0         2.5 MB
    c-ares-1.19.0              |       h2bbff1b_0         117 KB
    c-blosc2-2.8.0             |       hd77b12b_0         206 KB
    ca-certificates-2023.05.30 |       haa95532_0         120 KB
    certifi-2023.7.22          |   py39haa95532_0         154 KB
    conda-package-handling-2.2.0|   py39haa95532_0         287 KB
    conda-package-streaming-0.9.0|   py39haa95532_0          29 KB
    cryptography-41.0.2        |   py39h31511bf_0         1.1 MB
    curl-8.1.1                 |       he2ea4bf_2         147 KB
    dask-2023.6.0              |   py39haa95532_0           6 KB
    dask-core-2023.6.0         |   py39haa95532_0         2.1 MB
    datasets-2.12.0            |   py39haa95532_0         654 KB
    datashader-0.15.2          |   py39haa95532_0        16.9 MB
    debugpy-1.6.7              |   py39hd77b12b_0         2.9 MB
    distributed-2023.6.0       |   py39haa95532_0         1.3 MB
    exceptiongroup-1.0.4       |   py39haa95532_0          29 KB
    frozenlist-1.3.3           |   py39h2bbff1b_0          40 KB
    gflags-2.2.2               |       ha925a31_0         233 KB
    glog-0.5.0                 |       hd77b12b_0          85 KB
    h5py-3.9.0                 |   py39hfc34f40_0         914 KB
    hdf5-1.12.1                |       h51c971a_3        11.9 MB
    huggingface_hub-0.15.1     |   py39haa95532_0         318 KB
    imbalanced-learn-0.10.1    |   py39haa95532_1         273 KB
    intel-openmp-2023.1.0      |   h59b6b97_46319         2.7 MB
    ipykernel-6.25.0           |   py39h9909e9c_0         233 KB
    ipython-8.12.2             |   py39haa95532_0         1.1 MB
    joblib-1.2.0               |   py39haa95532_0         388 KB
    jupyter_client-7.4.9       |   py39haa95532_0         224 KB
    krb5-1.20.1                |       h5b6d351_1         786 KB
    libcurl-8.1.1              |       h86230a5_2         333 KB
    libevent-2.1.12            |       hcc03200_0         389 KB
    libllvm14-14.0.6           |       h4157e71_3          55 KB
    libpq-12.15                |       hb652d5d_1         3.2 MB
    libprotobuf-3.20.3         |       h23ce68f_0         2.2 MB
    libssh2-1.10.0             |       hcd4344a_2         236 KB
    libthrift-0.15.0           |       he49ee6e_2         777 KB
    llvmlite-0.40.0            |   py39hf2fb9eb_0        18.2 MB
    lz4-4.3.2                  |   py39h2bbff1b_0          76 KB
    mkl-2023.1.0               |   h6b88ed4_46357       155.6 MB
    mkl-service-2.4.0          |   py39h2bbff1b_1          45 KB
    mkl_fft-1.3.6              |   py39hf11a4ad_1         160 KB
    mkl_random-1.2.2           |   py39hf11a4ad_1         219 KB
    mpmath-1.3.0               |   py39haa95532_0         828 KB
    multidict-6.0.2            |   py39h2bbff1b_0          46 KB
    multiprocess-0.70.14       |   py39haa95532_0         241 KB
    networkx-3.1               |   py39haa95532_0         2.7 MB
    nltk-3.8.1                 |   py39haa95532_0         2.2 MB
    numba-0.57.0               |   py39h4ed8f06_0         4.2 MB
    numexpr-2.8.4              |   py39h7b80656_1         127 KB
    numpy-1.24.3               |   py39h79a8e48_1          11 KB
    numpy-base-1.24.3          |   py39h8a87ada_1         5.1 MB
    openssl-1.1.1v             |       h2bbff1b_0         5.5 MB
    orc-1.7.4                  |       h623e30f_1         823 KB
    param-1.13.0               |   py39haa95532_0         146 KB
    pip-23.2.1                 |   py39haa95532_0         2.8 MB
    platformdirs-3.10.0        |   py39haa95532_0          35 KB
    py-cpuinfo-8.0.0           |     pyhd3eb1b0_1          23 KB
    pyarrow-11.0.0             |   py39haa45b5f_0         3.2 MB
    pygments-2.15.1            |   py39haa95532_1         1.7 MB
    pyopenssl-23.2.0           |   py39haa95532_0          96 KB
    pytables-3.8.0             |   py39h4671533_3         1.9 MB
    pytest-7.4.0               |   py39haa95532_0         539 KB
    python-xxhash-2.0.2        |   py39h2bbff1b_1          23 KB
    pytorch-2.0.1              |cpu_py39hb0bdfb8_0        88.8 MB
    pyviz_comms-2.3.0          |   py39haa95532_0          37 KB
    pyzmq-23.2.0               |   py39hd77b12b_0         404 KB
    qt-main-5.15.2             |       h6072711_9        59.4 MB
    re2-2022.04.01             |       hd77b12b_0         374 KB
    requests-2.31.0            |   py39haa95532_0          99 KB
    requests-toolbelt-1.0.0    |   py39haa95532_0          71 KB
    responses-0.13.3           |     pyhd3eb1b0_0          24 KB
    sacremoses-0.0.43          |     pyhd3eb1b0_0         284 KB
    scikit-learn-1.3.0         |   py39h4ed8f06_0         7.0 MB
    scipy-1.11.1               |   py39h309d312_0        19.1 MB
    setuptools-68.0.0          |   py39haa95532_0         925 KB
    spyder-kernels-2.4.4       |   py39haa95532_0         154 KB
    statsmodels-0.14.0         |   py39h9128911_0         9.9 MB
    tokenizers-0.13.2          |   py39h49fca51_1         2.8 MB
    tornado-6.3.2              |   py39h2bbff1b_0         647 KB
    transformers-4.29.2        |   py39haa95532_0         6.2 MB
    twisted-22.10.0            |   py39h2bbff1b_0         5.3 MB
    typing-extensions-4.7.1    |   py39haa95532_0          10 KB
    typing_extensions-4.7.1    |   py39haa95532_0          57 KB
    urllib3-1.26.16            |   py39haa95532_0         201 KB
    utf8proc-2.6.1             |       h2bbff1b_0         312 KB
    xxhash-0.8.0               |       h2bbff1b_3          87 KB
    yarl-1.8.1                 |   py39h2bbff1b_0          80 KB
    zlib-ng-2.0.7              |       h2bbff1b_0          95 KB
    ------------------------------------------------------------
                                           Total:       473.1 MB

The following NEW packages will be INSTALLED:

  abseil-cpp         pkgs/main/win-64::abseil-cpp-20211102.0-hd77b12b_0
  aiohttp            pkgs/main/win-64::aiohttp-3.8.3-py39h2bbff1b_0
  aiosignal          pkgs/main/noarch::aiosignal-1.2.0-pyhd3eb1b0_0
  arrow-cpp          pkgs/main/win-64::arrow-cpp-11.0.0-py39h3577439_0
  async-timeout      pkgs/main/win-64::async-timeout-4.0.2-py39haa95532_0
  aws-c-common       pkgs/main/win-64::aws-c-common-0.4.57-ha925a31_1
  aws-c-event-stream pkgs/main/win-64::aws-c-event-stream-0.1.6-hd77b12b_5
  aws-checksums      pkgs/main/win-64::aws-checksums-0.1.9-ha925a31_0
  aws-sdk-cpp        pkgs/main/win-64::aws-sdk-cpp-1.8.185-hd77b12b_0
  boost-cpp          pkgs/main/win-64::boost-cpp-1.73.0-h2bbff1b_12
  c-ares             pkgs/main/win-64::c-ares-1.19.0-h2bbff1b_0
  c-blosc2           pkgs/main/win-64::c-blosc2-2.8.0-hd77b12b_0
  datasets           pkgs/main/win-64::datasets-2.12.0-py39haa95532_0
  exceptiongroup     pkgs/main/win-64::exceptiongroup-1.0.4-py39haa95532_0
  frozenlist         pkgs/main/win-64::frozenlist-1.3.3-py39h2bbff1b_0
  gflags             pkgs/main/win-64::gflags-2.2.2-ha925a31_0
  glog               pkgs/main/win-64::glog-0.5.0-hd77b12b_0
  libboost           pkgs/main/win-64::libboost-1.73.0-h6c2663c_12
  libevent           pkgs/main/win-64::libevent-2.1.12-hcc03200_0
  libllvm14          pkgs/main/win-64::libllvm14-14.0.6-h4157e71_3
  libpq              pkgs/main/win-64::libpq-12.15-hb652d5d_1
  libprotobuf        pkgs/main/win-64::libprotobuf-3.20.3-h23ce68f_0
  libthrift          pkgs/main/win-64::libthrift-0.15.0-he49ee6e_2
  lz4                pkgs/main/win-64::lz4-4.3.2-py39h2bbff1b_0
  multidict          pkgs/main/win-64::multidict-6.0.2-py39h2bbff1b_0
  multiprocess       pkgs/main/win-64::multiprocess-0.70.14-py39haa95532_0
  orc                pkgs/main/win-64::orc-1.7.4-h623e30f_1
  py-cpuinfo         pkgs/main/noarch::py-cpuinfo-8.0.0-pyhd3eb1b0_1
  pyarrow            pkgs/main/win-64::pyarrow-11.0.0-py39haa45b5f_0
  python-xxhash      pkgs/main/win-64::python-xxhash-2.0.2-py39h2bbff1b_1
  re2                pkgs/main/win-64::re2-2022.04.01-hd77b12b_0
  responses          pkgs/main/noarch::responses-0.13.3-pyhd3eb1b0_0
  sacremoses         pkgs/main/noarch::sacremoses-0.0.43-pyhd3eb1b0_0
  utf8proc           pkgs/main/win-64::utf8proc-2.6.1-h2bbff1b_0
  xxhash             pkgs/main/win-64::xxhash-0.8.0-h2bbff1b_3
  yarl               pkgs/main/win-64::yarl-1.8.1-py39h2bbff1b_0
  zlib-ng            pkgs/main/win-64::zlib-ng-2.0.7-h2bbff1b_0

The following packages will be UPDATED:

  anaconda-client                     1.11.2-py39haa95532_0 --> 1.12.0-py39haa95532_0
  ca-certificates                     2023.01.10-haa95532_0 --> 2023.05.30-haa95532_0
  certifi                          2022.12.7-py39haa95532_0 --> 2023.7.22-py39haa95532_0
  conda-package-han~                   2.0.2-py39haa95532_0 --> 2.2.0-py39haa95532_0
  conda-package-str~                   0.7.0-py39haa95532_0 --> 0.9.0-py39haa95532_0
  cryptography                        39.0.1-py39h21b164f_0 --> 41.0.2-py39h31511bf_0
  curl                                    7.88.1-h2bbff1b_0 --> 8.1.1-he2ea4bf_2
  dask                              2023.4.1-py39haa95532_0 --> 2023.6.0-py39haa95532_0
  dask-core                         2023.4.1-py39haa95532_0 --> 2023.6.0-py39haa95532_0
  datashader                          0.14.4-py39haa95532_0 --> 0.15.2-py39haa95532_0
  debugpy                              1.5.1-py39hd77b12b_0 --> 1.6.7-py39hd77b12b_0
  distributed                       2023.4.1-py39haa95532_0 --> 2023.6.0-py39haa95532_0
  h5py                                 3.7.0-py39h3de5c98_0 --> 3.9.0-py39hfc34f40_0
  hdf5                                    1.10.6-h1756f20_1 --> 1.12.1-h51c971a_3
  huggingface_hub                     0.10.1-py39haa95532_0 --> 0.15.1-py39haa95532_0
  imbalanced-learn                    0.10.1-py39haa95532_0 --> 0.10.1-py39haa95532_1
  intel-openmp                       2021.4.0-haa95532_3556 --> 2023.1.0-h59b6b97_46319
  ipykernel                           6.19.2-py39hd4e2768_0 --> 6.25.0-py39h9909e9c_0
  ipython                             8.12.0-py39haa95532_0 --> 8.12.2-py39haa95532_0
  joblib                               1.1.1-py39haa95532_0 --> 1.2.0-py39haa95532_0
  krb5                                    1.19.4-h5b6d351_0 --> 1.20.1-h5b6d351_1
  libcurl                                 7.88.1-h86230a5_0 --> 8.1.1-h86230a5_2
  libssh2                                 1.10.0-hcd4344a_0 --> 1.10.0-hcd4344a_2
  llvmlite                            0.39.1-py39h23ce68f_0 --> 0.40.0-py39hf2fb9eb_0
  mkl                                 2021.4.0-haa95532_640 --> 2023.1.0-h6b88ed4_46357
  mkl-service                          2.4.0-py39h2bbff1b_0 --> 2.4.0-py39h2bbff1b_1
  mkl_fft                              1.3.1-py39h277e83a_0 --> 1.3.6-py39hf11a4ad_1
  mkl_random                           1.2.2-py39hf11a4ad_0 --> 1.2.2-py39hf11a4ad_1
  mpmath                               1.2.1-py39haa95532_0 --> 1.3.0-py39haa95532_0
  networkx                             2.8.4-py39haa95532_1 --> 3.1-py39haa95532_0
  nltk               pkgs/main/noarch::nltk-3.7-pyhd3eb1b0~ --> pkgs/main/win-64::nltk-3.8.1-py39haa95532_0
  numba                               0.56.4-py39hf11a4ad_0 --> 0.57.0-py39h4ed8f06_0
  numexpr                              2.8.4-py39h5b0cc5e_0 --> 2.8.4-py39h7b80656_1
  numpy                               1.23.5-py39h3b20f71_0 --> 1.24.3-py39h79a8e48_1
  numpy-base                          1.23.5-py39h4da318b_0 --> 1.24.3-py39h8a87ada_1
  openssl                                 1.1.1t-h2bbff1b_0 --> 1.1.1v-h2bbff1b_0
  param                               1.12.3-py39haa95532_0 --> 1.13.0-py39haa95532_0
  pip                                 23.0.1-py39haa95532_0 --> 23.2.1-py39haa95532_0
  platformdirs                         2.5.2-py39haa95532_0 --> 3.10.0-py39haa95532_0
  pygments                            2.15.1-py39haa95532_0 --> 2.15.1-py39haa95532_1
  pyopenssl                           23.0.0-py39haa95532_0 --> 23.2.0-py39haa95532_0
  pytables                             3.7.0-py39h388bc9b_1 --> 3.8.0-py39h4671533_3
  pytest                               7.1.2-py39haa95532_0 --> 7.4.0-py39haa95532_0
  pytorch                         1.12.1-cpu_py39h5e1f01c_1 --> 2.0.1-cpu_py39hb0bdfb8_0
  pyviz_comms        pkgs/main/noarch::pyviz_comms-2.0.2-p~ --> pkgs/main/win-64::pyviz_comms-2.3.0-py39haa95532_0
  qt-main                                 5.15.2-he8e5bd7_8 --> 5.15.2-h6072711_9
  requests                            2.29.0-py39haa95532_0 --> 2.31.0-py39haa95532_0
  requests-toolbelt  pkgs/main/noarch::requests-toolbelt-0~ --> pkgs/main/win-64::requests-toolbelt-1.0.0-py39haa95532_0
  scikit-learn                         1.2.2-py39hd77b12b_0 --> 1.3.0-py39h4ed8f06_0
  scipy                               1.10.1-py39h321e85e_0 --> 1.11.1-py39h309d312_0
  setuptools                          66.0.0-py39haa95532_0 --> 68.0.0-py39haa95532_0
  spyder-kernels                       2.4.3-py39haa95532_0 --> 2.4.4-py39haa95532_0
  statsmodels                         0.13.5-py39h080aedc_1 --> 0.14.0-py39h9128911_0
  tokenizers                          0.11.4-py39he5181cf_1 --> 0.13.2-py39h49fca51_1
  tornado                                6.2-py39h2bbff1b_0 --> 6.3.2-py39h2bbff1b_0
  transformers                        4.24.0-py39haa95532_0 --> 4.29.2-py39haa95532_0
  twisted                             22.2.0-py39h2bbff1b_1 --> 22.10.0-py39h2bbff1b_0
  typing-extensions                    4.5.0-py39haa95532_0 --> 4.7.1-py39haa95532_0
  typing_extensions                    4.5.0-py39haa95532_0 --> 4.7.1-py39haa95532_0
  urllib3                            1.26.15-py39haa95532_0 --> 1.26.16-py39haa95532_0

The following packages will be SUPERSEDED by a higher-priority channel:

  conda-content-tru~ pkgs/main/win-64::conda-content-trust~ --> pkgs/main/noarch::conda-content-trust-0.1.1-pyhd3eb1b0_0

The following packages will be DOWNGRADED:

  jupyter_client                       8.1.0-py39haa95532_0 --> 7.4.9-py39haa95532_0
  pyzmq                               25.0.2-py39hd77b12b_0 --> 23.2.0-py39hd77b12b_0


Proceed ([y]/n)? y


Downloading and Extracting Packages
pytables-3.8.0       | 1.9 MB    | ################################################################################################################################################################################################# | 100%
pytorch-2.0.1        | 88.8 MB   | ################################################################################################################################################################################################# | 100%
llvmlite-0.40.0      | 18.2 MB   | ################################################################################################################################################################################################# | 100%
gflags-2.2.2         | 233 KB    | ################################################################################################################################################################################################# | 100%
aiosignal-1.2.0      | 12 KB     | ################################################################################################################################################################################################# | 100%
lz4-4.3.2            | 76 KB     | ################################################################################################################################################################################################# | 100%
mkl-2023.1.0         | 155.6 MB  | ################################################################################################################################################################################################# | 100%
orc-1.7.4            | 823 KB    | ################################################################################################################################################################################################# | 100%
aws-checksums-0.1.9  | 50 KB     | ################################################################################################################################################################################################# | 100%
pygments-2.15.1      | 1.7 MB    | ################################################################################################################################################################################################# | 100%
libprotobuf-3.20.3   | 2.2 MB    | ################################################################################################################################################################################################# | 100%
twisted-22.10.0      | 5.3 MB    | ################################################################################################################################################################################################# | 100%
openssl-1.1.1v       | 5.5 MB    | ################################################################################################################################################################################################# | 100%
ipykernel-6.25.0     | 233 KB    | ################################################################################################################################################################################################# | 100%
py-cpuinfo-8.0.0     | 23 KB     | ################################################################################################################################################################################################# | 100%
requests-2.31.0      | 99 KB     | ################################################################################################################################################################################################# | 100%
yarl-1.8.1           | 80 KB     | ################################################################################################################################################################################################# | 100%
numpy-base-1.24.3    | 5.1 MB    | ################################################################################################################################################################################################# | 100%
krb5-1.20.1          | 786 KB    | ################################################################################################################################################################################################# | 100%
responses-0.13.3     | 24 KB     | ################################################################################################################################################################################################# | 100%
mkl_fft-1.3.6        | 160 KB    | ################################################################################################################################################################################################# | 100%
numexpr-2.8.4        | 127 KB    | ################################################################################################################################################################################################# | 100%
hdf5-1.12.1          | 11.9 MB   | ################################################################################################################################################################################################# | 100%
re2-2022.04.01       | 374 KB    | ################################################################################################################################################################################################# | 100%
qt-main-5.15.2       | 59.4 MB   | ################################################################################################################################################################################################# | 100%
transformers-4.29.2  | 6.2 MB    | ################################################################################################################################################################################################# | 100%
libevent-2.1.12      | 389 KB    | ################################################################################################################################################################################################# | 100%
pip-23.2.1           | 2.8 MB    | ################################################################################################################################################################################################# | 100%
scipy-1.11.1         | 19.1 MB   | ################################################################################################################################################################################################# | 100%
typing_extensions-4. | 57 KB     | ################################################################################################################################################################################################# | 100%
libssh2-1.10.0       | 236 KB    | ################################################################################################################################################################################################# | 100%
dask-2023.6.0        | 6 KB      | ################################################################################################################################################################################################# | 100%
dask-core-2023.6.0   | 2.1 MB    | ################################################################################################################################################################################################# | 100%
libthrift-0.15.0     | 777 KB    | ################################################################################################################################################################################################# | 100%
setuptools-68.0.0    | 925 KB    | ################################################################################################################################################################################################# | 100%
imbalanced-learn-0.1 | 273 KB    | ################################################################################################################################################################################################# | 100%
datasets-2.12.0      | 654 KB    | ################################################################################################################################################################################################# | 100%
pyopenssl-23.2.0     | 96 KB     | ################################################################################################################################################################################################# | 100%
multidict-6.0.2      | 46 KB     | ################################################################################################################################################################################################# | 100%
pytest-7.4.0         | 539 KB    | ################################################################################################################################################################################################# | 100%
sacremoses-0.0.43    | 284 KB    | ################################################################################################################################################################################################# | 100%
huggingface_hub-0.15 | 318 KB    | ################################################################################################################################################################################################# | 100%
param-1.13.0         | 146 KB    | ################################################################################################################################################################################################# | 100%
c-ares-1.19.0        | 117 KB    | ################################################################################################################################################################################################# | 100%
numpy-1.24.3         | 11 KB     | ################################################################################################################################################################################################# | 100%
libcurl-8.1.1        | 333 KB    | ################################################################################################################################################################################################# | 100%
abseil-cpp-20211102. | 1.7 MB    | ################################################################################################################################################################################################# | 100%
typing-extensions-4. | 10 KB     | ################################################################################################################################################################################################# | 100%
arrow-cpp-11.0.0     | 7.2 MB    | ################################################################################################################################################################################################# | 100%
networkx-3.1         | 2.7 MB    | ################################################################################################################################################################################################# | 100%
mkl-service-2.4.0    | 45 KB     | ################################################################################################################################################################################################# | 100%
h5py-3.9.0           | 914 KB    | ################################################################################################################################################################################################# | 100%
mpmath-1.3.0         | 828 KB    | ################################################################################################################################################################################################# | 100%
aws-c-event-stream-0 | 26 KB     | ################################################################################################################################################################################################# | 100%
glog-0.5.0           | 85 KB     | ################################################################################################################################################################################################# | 100%
tornado-6.3.2        | 647 KB    | ################################################################################################################################################################################################# | 100%
ipython-8.12.2       | 1.1 MB    | ################################################################################################################################################################################################# | 100%
spyder-kernels-2.4.4 | 154 KB    | ################################################################################################################################################################################################# | 100%
libpq-12.15          | 3.2 MB    | ################################################################################################################################################################################################# | 100%
pyviz_comms-2.3.0    | 37 KB     | ################################################################################################################################################################################################# | 100%
statsmodels-0.14.0   | 9.9 MB    | ################################################################################################################################################################################################# | 100%
cryptography-41.0.2  | 1.1 MB    | ################################################################################################################################################################################################# | 100%
zlib-ng-2.0.7        | 95 KB     | ################################################################################################################################################################################################# | 100%
curl-8.1.1           | 147 KB    | ################################################################################################################################################################################################# | 100%
aws-sdk-cpp-1.8.185  | 2.5 MB    | ################################################################################################################################################################################################# | 100%
xxhash-0.8.0         | 87 KB     | ################################################################################################################################################################################################# | 100%
intel-openmp-2023.1. | 2.7 MB    | ################################################################################################################################################################################################# | 100%
requests-toolbelt-1. | 71 KB     | ################################################################################################################################################################################################# | 100%
numba-0.57.0         | 4.2 MB    | ################################################################################################################################################################################################# | 100%
pyzmq-23.2.0         | 404 KB    | ################################################################################################################################################################################################# | 100%
jupyter_client-7.4.9 | 224 KB    | ################################################################################################################################################################################################# | 100%
nltk-3.8.1           | 2.2 MB    | ################################################################################################################################################################################################# | 100%
utf8proc-2.6.1       | 312 KB    | ################################################################################################################################################################################################# | 100%
tokenizers-0.13.2    | 2.8 MB    | ################################################################################################################################################################################################# | 100%
multiprocess-0.70.14 | 241 KB    | ################################################################################################################################################################################################# | 100%
distributed-2023.6.0 | 1.3 MB    | ################################################################################################################################################################################################# | 100%
mkl_random-1.2.2     | 219 KB    | ################################################################################################################################################################################################# | 100%
joblib-1.2.0         | 388 KB    | ################################################################################################################################################################################################# | 100%
c-blosc2-2.8.0       | 206 KB    | ################################################################################################################################################################################################# | 100%
exceptiongroup-1.0.4 | 29 KB     | ################################################################################################################################################################################################# | 100%
scikit-learn-1.3.0   | 7.0 MB    | ################################################################################################################################################################################################# | 100%
platformdirs-3.10.0  | 35 KB     | ################################################################################################################################################################################################# | 100%
ca-certificates-2023 | 120 KB    | ################################################################################################################################################################################################# | 100%
conda-package-handli | 287 KB    | ################################################################################################################################################################################################# | 100%
urllib3-1.26.16      | 201 KB    | ################################################################################################################################################################################################# | 100%
aws-c-common-0.4.57  | 147 KB    | ################################################################################################################################################################################################# | 100%
debugpy-1.6.7        | 2.9 MB    | ################################################################################################################################################################################################# | 100%
aiohttp-3.8.3        | 415 KB    | ################################################################################################################################################################################################# | 100%
conda-package-stream | 29 KB     | ################################################################################################################################################################################################# | 100%
async-timeout-4.0.2  | 12 KB     | ################################################################################################################################################################################################# | 100%
anaconda-client-1.12 | 166 KB    | ################################################################################################################################################################################################# | 100%
frozenlist-1.3.3     | 40 KB     | ################################################################################################################################################################################################# | 100%
pyarrow-11.0.0       | 3.2 MB    | ################################################################################################################################################################################################# | 100%
libllvm14-14.0.6     | 55 KB     | ################################################################################################################################################################################################# | 100%
certifi-2023.7.22    | 154 KB    | ################################################################################################################################################################################################# | 100%
python-xxhash-2.0.2  | 23 KB     | ################################################################################################################################################################################################# | 100%
datashader-0.15.2    | 16.9 MB   | ################################################################################################################################################################################################# | 100%
Preparing transaction: done
Verifying transaction: done
Executing transaction: /

    Windows 64-bit packages of scikit-learn can be accelerated using scikit-learn-intelex.
    More details are available here: https://intel.github.io/scikit-learn-intelex

    For example:

        $ conda install scikit-learn-intelex
        $ python -m sklearnex my_application.py


done

###########################################

(base) C:\Users\James>python -m pip install -U --pre astroquery
Collecting astroquery
  Obtaining dependency information for astroquery from https://files.pythonhosted.org/packages/c5/c7/cfcabb7b113670e1d86cbbed2f197742039bc281e4b695b31f20eba5b754/astroquery-0.4.7.dev8893-py3-none-any.whl.metadata
  Downloading astroquery-0.4.7.dev8893-py3-none-any.whl.metadata (6.6 kB)
Requirement already satisfied: numpy>=1.18 in c:\users\james\anaconda3\lib\site-packages (from astroquery) (1.24.3)
Requirement already satisfied: astropy>=4.2.1 in c:\users\james\anaconda3\lib\site-packages (from astroquery) (5.0.4)
Requirement already satisfied: requests>=2.19 in c:\users\james\anaconda3\lib\site-packages (from astroquery) (2.31.0)
Requirement already satisfied: beautifulsoup4>=4.8 in c:\users\james\anaconda3\lib\site-packages (from astroquery) (4.12.2)
Requirement already satisfied: html5lib>=0.999 in c:\users\james\anaconda3\lib\site-packages (from astroquery) (1.1)
Requirement already satisfied: keyring>=15.0 in c:\users\james\anaconda3\lib\site-packages (from astroquery) (23.13.1)
Collecting pyvo>=1.1 (from astroquery)
  Obtaining dependency information for pyvo>=1.1 from https://files.pythonhosted.org/packages/6f/d3/ce8d1ec673464caf53cf4f85d195f73ed1adc729a4acce22ac434fc64c79/pyvo-1.4.2-py3-none-any.whl.metadata
  Downloading pyvo-1.4.2-py3-none-any.whl.metadata (4.2 kB)
Requirement already satisfied: pyerfa>=2.0 in c:\users\james\anaconda3\lib\site-packages (from astropy>=4.2.1->astroquery) (2.0.0)
Requirement already satisfied: PyYAML>=3.13 in c:\users\james\anaconda3\lib\site-packages (from astropy>=4.2.1->astroquery) (6.0)
Requirement already satisfied: packaging>=19.0 in c:\users\james\anaconda3\lib\site-packages (from astropy>=4.2.1->astroquery) (23.0)
Requirement already satisfied: soupsieve>1.2 in c:\users\james\anaconda3\lib\site-packages (from beautifulsoup4>=4.8->astroquery) (2.4)
Requirement already satisfied: six>=1.9 in c:\users\james\anaconda3\lib\site-packages (from html5lib>=0.999->astroquery) (1.16.0)
Requirement already satisfied: webencodings in c:\users\james\anaconda3\lib\site-packages (from html5lib>=0.999->astroquery) (0.5.1)
Requirement already satisfied: jaraco.classes in c:\users\james\anaconda3\lib\site-packages (from keyring>=15.0->astroquery) (3.2.1)
Requirement already satisfied: importlib-metadata>=4.11.4 in c:\users\james\anaconda3\lib\site-packages (from keyring>=15.0->astroquery) (6.0.0)
Requirement already satisfied: pywin32-ctypes>=0.2.0 in c:\users\james\anaconda3\lib\site-packages (from keyring>=15.0->astroquery) (0.2.0)
Requirement already satisfied: charset-normalizer<4,>=2 in c:\users\james\anaconda3\lib\site-packages (from requests>=2.19->astroquery) (2.0.4)
Requirement already satisfied: idna<4,>=2.5 in c:\users\james\anaconda3\lib\site-packages (from requests>=2.19->astroquery) (3.4)
Requirement already satisfied: urllib3<3,>=1.21.1 in c:\users\james\anaconda3\lib\site-packages (from requests>=2.19->astroquery) (1.26.16)
Requirement already satisfied: certifi>=2017.4.17 in c:\users\james\anaconda3\lib\site-packages (from requests>=2.19->astroquery) (2023.7.22)
Requirement already satisfied: zipp>=0.5 in c:\users\james\anaconda3\lib\site-packages (from importlib-metadata>=4.11.4->keyring>=15.0->astroquery) (3.11.0)
Requirement already satisfied: more-itertools in c:\users\james\anaconda3\lib\site-packages (from jaraco.classes->keyring>=15.0->astroquery) (8.12.0)
Downloading astroquery-0.4.7.dev8893-py3-none-any.whl (5.2 MB)
   ---------------------------------------- 5.2/5.2 MB 7.6 MB/s eta 0:00:00
Downloading pyvo-1.4.2-py3-none-any.whl (888 kB)
   ---------------------------------------- 888.9/888.9 kB 9.3 MB/s eta 0:00:00
Installing collected packages: pyvo, astroquery
Successfully installed astroquery-0.4.7.dev8893 pyvo-1.4.2
